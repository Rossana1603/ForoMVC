
@using System.Activities.Statements
@using System.Web.UI.WebControls
@model Forum.Web.Models.TopicDetailViewModel

@{
    ViewBag.Title = "TopicDetail";
}



<div>
    <br/>
    <div class="panel panel-primary" style="width: 815px">
        <table style="width: 800px">
            <tr>

                <td><h4>@Model.Topic.Title</h4></td>

            </tr>
            <tr>
                <td style="padding-bottom:10px;">@Model.Topic.Content</td>
            </tr>
        </table>
    </div>
    <br/>
    @foreach (var item in Model.Posts)
    {
        <div class="panel panel-primary" style="width: 815px">

            <table style="width: 800px">
                <tr>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td style="width: 115px">
                    @if (item.AvatarFileName == string.Empty)
                    {
                        <img src="~/Images/default-avatar.dmbNkD5D-u45r44go_cf0g.png" class="img-responsive" alt="Responsive image" style="width: 100px">
                    }
                    else
                    {
                        <img src="~/Content/Images/@(item.AvatarFileName)" class="img-responsive" alt="Responsive image" style="width: 100px">
                    }
                    </td>
                    <td style="padding-bottom: 10px">
                        @Html.DisplayFor(modelItem => item.Content)
                    </td>
                </tr>
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.Author.UserName)
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td style="text-align: right">
                        @if(item.IsTopicCreator)
                        {
                            @Html.ActionLink("Edit", "EditPost", "Post", new { id = item.TopicId, postId = item.Id }, null)
                            <span> | </span>
                            @Html.ActionLink("Delete", "DeletePost", "Post", new { id = item.TopicId, postId = item.Id }, null)
                        } 
                        | @Html.ActionLink("Like", "like", new { })
                    </td>
                </tr>
                <tr></tr>
            </table>
        </div>
    }
</div>
<p>        
    @Html.ActionLink("New post", "AddPost", "Post", new { id = Model.Topic.Id }, null)
</p>